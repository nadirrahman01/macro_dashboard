<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cordoba Capital – Global Macro Engine (Beta)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/style.css" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cordobaGold: '#9A690F',
            cordobaSoft: '#FFF7F0'
          },
          fontFamily: {
            heading: ['"Times New Roman"', 'serif'],
            body: ['Helvetica', 'system-ui', 'sans-serif']
          },
          boxShadow: {
            subtle: '0 10px 30px rgba(0,0,0,0.04)'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-[#FFFCF9] text-neutral-900 font-body min-h-screen">

  <!-- Page wrapper -->
  <div class="min-h-screen flex flex-col lg:flex-row">

    <!-- Sidebar -->
    <aside class="w-full lg:w-72 border-b lg:border-b-0 lg:border-r border-neutral-200 bg-white/80 backdrop-blur px-5 py-4 flex flex-col gap-4">
      <div>
        <div class="font-heading text-2xl tracking-wide leading-tight">
          Cordoba Capital
        </div>
        <div class="text-[11px] uppercase tracking-[0.25em] text-neutral-500 mt-1">
          Global Macro Engine
        </div>
        <div class="mt-2 inline-flex items-center gap-2 text-[11px] text-neutral-500">
          <span class="inline-flex items-center gap-1 rounded-full border border-neutral-200 bg-cordobaSoft px-2 py-0.5">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
            Beta version
          </span>
          <span>World Bank WDI data</span>
        </div>
      </div>

      <!-- Navigation (static for now) -->
      <nav class="text-sm text-neutral-700 space-y-1">
        <div class="text-[10px] uppercase tracking-[0.25em] text-neutral-500 mb-1">
          Views
        </div>
        <button class="w-full flex items-center justify-between px-2.5 py-2 rounded-xl bg-cordobaSoft text-neutral-900">
          <span class="flex items-center gap-2">
            <span class="h-1.5 w-1.5 rounded-full bg-cordobaGold"></span>
            Country snapshot
          </span>
          <span class="text-[10px] uppercase text-neutral-500">Live</span>
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
          Growth &amp; cycle
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-rose-400"></span>
          Inflation lens
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-sky-400"></span>
          Liquidity &amp; money
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-amber-400"></span>
          External balance
        </button>
      </nav>

      <div class="mt-auto text-[11px] text-neutral-500 border-t border-neutral-200 pt-3 space-y-1">
        <div>
          Built for internal use by Cordoba Capital.<br />
          Sources: World Bank World Development Indicators (WDI).<br />
          Data is annual and may be revised.
        </div>
        <div class="text-[10px] text-neutral-500">
          Macro Engine v0.3 · Last major update: Dec 2025 · Internal use only.
        </div>
        <button
          id="cc-methodology-open"
          class="mt-1 text-[11px] text-cordobaGold underline decoration-1 underline-offset-2 hover:text-neutral-900"
          type="button"
        >
          Methodology &amp; data notes
        </button>
      </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 px-4 sm:px-6 lg:px-8 py-5 space-y-5">

      <!-- Top bar -->
      <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <div class="space-y-1">
          <div class="text-xs uppercase tracking-[0.28em] text-neutral-500">
            Global Macro Dashboard
          </div>
          <div class="flex flex-wrap items-center gap-2 text-sm text-neutral-600">
            <span id="cc-country-current-label" class="font-semibold text-neutral-900">
              United States
            </span>
            <span class="text-neutral-400">·</span>
            <span id="cc-country-current-region" class="text-neutral-600">
              G-20 · DM
            </span>
            <span class="text-neutral-400">·</span>
            <span id="cc-data-as-of" class="text-neutral-500">
              latest: n/a
            </span>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <!-- Country dropdown -->
          <div class="relative">
            <button
              id="cc-country-toggle"
              type="button"
              class="inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-3 py-1.5 text-sm text-neutral-800 shadow-subtle hover:border-cordobaGold"
            >
              <span class="h-2 w-2 rounded-full bg-emerald-500" id="cc-country-dot"></span>
              <span data-cc-country-label>United States</span>
              <span class="text-[11px] text-neutral-500" data-cc-country-region>G-20 · DM</span>
              <span class="text-[11px] text-neutral-500">▼</span>
            </button>

            <div
              id="cc-country-menu"
              class="hidden absolute z-20 mt-1 w-64 rounded-xl border border-neutral-200 bg-white shadow-subtle text-sm max-h-72 overflow-y-auto"
            >
              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">
                G-20 Countries
              </div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="US" data-cc-region="G-20 · DM">
                United States
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="UK" data-cc-region="G-20 · DM">
                United Kingdom
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="DE" data-cc-region="G-20 · DM">
                Germany
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="FR" data-cc-region="G-20 · DM">
                France
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="JP" data-cc-region="G-20 · DM">
                Japan
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="CN" data-cc-region="G-20 · EM">
                China
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="IN" data-cc-region="G-20 · EM">
                India
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="BR" data-cc-region="G-20 · EM">
                Brazil
              </button>
            </div>
          </div>

          <!-- Support / Login -->
          <div class="flex items-center gap-1 text-xs bg-white border border-neutral-200 rounded-full p-0.5 shadow-subtle">
            <a
              href="mailto:help@cordobacapital.co.uk"
              class="px-3 py-1 rounded-full bg-cordobaGold text-white font-medium hover:opacity-90 transition"
            >
              Support
            </a>
            <a
              href="https://cordobacapital.co.uk/login/"
              class="px-3 py-1 rounded-full text-neutral-500 hover:bg-cordobaSoft hover:text-neutral-900 transition"
            >
              Login
            </a>
          </div>
        </div>
      </header>

      <!-- Regime summary row -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <!-- Narrative -->
        <div class="lg:col-span-2 rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Macro Regime – Narrative
              </div>
              <div id="cc-regime-title" class="mt-1 text-sm font-semibold text-neutral-900">
                Loading regime...
              </div>
            </div>
            <div class="text-right">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Data coverage
              </div>
              <div class="text-sm text-neutral-900">
                Confidence: <span id="cc-regime-confidence">–</span>
              </div>
            </div>
          </div>
          <p id="cc-regime-body" class="text-sm text-neutral-700 leading-relaxed">
            Pulling in latest World Bank macro data...
          </p>
          <div class="flex flex-wrap items-center gap-2 text-xs text-neutral-500">
            <span class="uppercase tracking-[0.18em] text-[10px]">Closest analogue years:</span>
            <span id="cc-analogue-years" class="flex flex-wrap gap-1"></span>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-neutral-500">
            <span class="uppercase tracking-[0.18em] text-[10px]">Risk flags:</span>
            <span id="cc-risk-flags" class="flex flex-wrap gap-1"></span>
          </div>
        </div>

        <!-- Engine scorecards -->
        <div class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-3 flex flex-col gap-3">
          <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
            Composite Engines
          </div>
          <div id="cc-engine-cards" class="grid grid-cols-2 gap-2 text-xs">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- Headline indicators + inflection list -->
      <section class="grid grid-cols-1 xl:grid-cols-3 gap-4">
        <!-- Headline tiles -->
        <div class="xl:col-span-2 rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4">
          <div class="flex items-center justify-between mb-3">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Headline Macro Indicators
              </div>
              <div class="text-sm text-neutral-700">
                Latest readings (World Bank WDI, annual)
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm">
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                GDP growth
              </div>
              <div id="cc-gdp-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-gdp-extra">
                Real GDP growth (annual %).
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Inflation (CPI)
              </div>
              <div id="cc-inflation-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-inflation-extra">
                Headline CPI (annual %).
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Unemployment
              </div>
              <div id="cc-unemployment-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-unemployment-extra">
                % of labour force.
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Broad money growth
              </div>
              <div id="cc-money-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-money-extra">
                M2 (or equivalent) annual growth.
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Current account / GDP
              </div>
              <div id="cc-ca-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-ca-extra">
                External balance (% of GDP).
              </div>
            </div>
          </div>
        </div>

        <!-- Inflection list -->
        <div class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Key Inflection Signals
              </div>
              <div class="text-sm text-neutral-700">
                z-scores vs 10-year history
              </div>
            </div>
          </div>
          <div id="cc-inflection-list" class="space-y-2 text-xs">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- Indicator table -->
      <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-3">
          <div>
            <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
              Indicator Grid
            </div>
            <div class="text-sm text-neutral-700">
              Key World Bank indicators – <span id="cc-signals-country">United States</span>
            </div>
          </div>
          <div class="flex items-center gap-2 text-[11px]">
            <button
              id="cc-filter-all"
              class="px-2.5 py-1 rounded-full border border-neutral-200 bg-cordobaSoft"
              type="button"
            >
              All indicators
            </button>
            <button
              id="cc-filter-top"
              class="px-2.5 py-1 rounded-full border border-neutral-200 bg-white"
              type="button"
            >
              Largest moves
            </button>
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full text-xs">
            <thead>
              <tr class="text-[11px] uppercase tracking-[0.16em] text-neutral-500 border-b border-neutral-200">
                <th class="py-2 text-left">Indicator</th>
                <th class="py-2 text-left">Engine</th>
                <th class="py-2 text-left">Bucket</th>
                <th class="py-2 text-left">Signal</th>
                <th class="py-2 text-left">Trend (10y)</th>
                <th class="py-2 text-right">Last</th>
                <th class="py-2 text-right">z-Score</th>
                <th class="py-2 text-left">Note</th>
              </tr>
            </thead>
            <tbody id="cc-indicator-rows" class="divide-y divide-neutral-100">
              <!-- Filled by JS -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Analyst note helper + Cordoba research row -->
      <section class="grid grid-cols-1 xl:grid-cols-3 gap-4">
        <!-- Note helper -->
        <div class="xl:col-span-2 rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Analyst Note Helper
              </div>
              <div class="text-sm text-neutral-700">
                Draft macro commentary for the selected country
              </div>
            </div>
            <div class="text-[11px] text-neutral-500">
              Auto-generated from current engine configuration
            </div>
          </div>
          <textarea
            id="cc-note-draft"
            class="mt-2 w-full h-48 rounded-xl border border-neutral-200 bg-[#FFFCF9] px-3 py-2 text-xs leading-relaxed text-neutral-800 focus:outline-none focus:ring-1 focus:ring-cordobaGold focus:border-cordobaGold"
            placeholder="A short macro note will appear here once the data has loaded. You can edit freely before sending."
          ></textarea>
          <div class="mt-2">
            <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500 mb-1">
              Pointers to structure your note
            </div>
            <ul id="cc-note-bullets" class="list-disc list-inside space-y-1 text-xs text-neutral-700">
              <!-- Filled by JS -->
            </ul>
          </div>
          <div class="mt-3">
            <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500 mb-1">
              Next 3 questions to ask
            </div>
            <ul id="cc-next-questions" class="list-disc list-inside space-y-1 text-xs text-neutral-700">
              <!-- Filled by JS -->
            </ul>
          </div>
        </div>

        <!-- Cordoba research suggestions -->
        <div class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div>
            <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
              Cordoba Research Matches
            </div>
            <div class="text-sm text-neutral-700">
              Notes most relevant to this regime
            </div>
            <div class="text-[11px] text-neutral-600 mt-1">
              Suggested directly from the main Cordoba Capital site based on current engine scores.
            </div>
          </div>
          <div id="cc-research-list" class="mt-2 space-y-2 text-xs">
            <!-- Filled by JS -->
          </div>
          <div class="mt-2 text-[11px] text-neutral-500">
            Full library:&nbsp;
            <a href="https://cordobacapital.co.uk/insights/" target="_blank" rel="noopener noreferrer" class="underline decoration-cordobaGold decoration-1 underline-offset-2">
              cordobacapital.co.uk/insights
            </a>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Methodology modal -->
  <div
    id="cc-methodology-modal"
    class="fixed inset-0 z-40 hidden"
  >
    <div
      class="absolute inset-0 bg-black/20"
      data-cc-methodology-close
    ></div>
    <div
      class="absolute inset-x-4 sm:inset-x-0 top-16 mx-auto max-w-xl rounded-2xl bg-white shadow-subtle border border-neutral-200 px-5 py-4"
    >
      <div class="flex items-start justify-between gap-3">
        <div>
          <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
            Methodology &amp; data notes
          </div>
          <div class="text-sm text-neutral-800 mt-1">
            How the Cordoba Macro Engine builds its scores
          </div>
        </div>
        <button
          id="cc-methodology-close"
          type="button"
          class="text-[11px] text-neutral-500 hover:text-neutral-800"
        >
          ✕
        </button>
      </div>
      <div class="mt-3 space-y-2 text-xs text-neutral-700 leading-relaxed">
        <p>
          Indicators are taken from the World Bank World Development Indicators (WDI) database.
          For each series, we calculate a 10-year rolling mean and standard deviation and express
          the latest reading as a z-score relative to that history.
        </p>
        <p>
          Engine scores (Growth, Inflation, Liquidity, External) combine these z-scores using simple
          weights. Scores are rescaled to a 10–90 range, so values around 50 indicate readings close
          to the past decade, while higher or lower scores flag stretched conditions.
        </p>
        <p>
          Data is annual and subject to revision. Some indicators may only be available with a lag,
          or may be interpolated by the World Bank. The dashboard should therefore be treated as a
          structured starting point for analysis rather than a real-time trading signal.
        </p>
        <p class="text-[11px] text-neutral-500">
          This tool is for internal and educational use only. It does not constitute investment research
          or investment advice. Always cross-check figures against primary sources before use.
        </p>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="main.js"></script>
  <!-- Export libraries -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Export buttons -->
  <div class="fixed bottom-4 right-4 flex gap-2 z-50">
    <button id="export-png" class="px-3 py-2 text-xs bg-cordobaGold text-white rounded-full shadow-subtle">
      PNG
    </button>
    <button id="export-pdf" class="px-3 py-2 text-xs bg-cordobaGold text-white rounded-full shadow-subtle">
      PDF
    </button>
    <button id="export-copy" class="px-3 py-2 text-xs bg-cordobaGold text-white rounded-full shadow-subtle">
      Copy
    </button>
  </div>

</body>
</html>
