<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cordoba Research Group – GME</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="assets/style.css" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cordobaGold: '#845F0F',
            cordobaSoft: '#FFF7F0'
          },
          fontFamily: {
            heading: ['"Times New Roman"', 'serif'],
            body: ['Helvetica', 'system-ui', 'sans-serif']
          },
          boxShadow: {
            subtle: '0 10px 30px rgba(0,0,0,0.04)'
          }
        }
      }
    }
  </script>

  <!-- ✅ Optional: show fatal JS errors on screen (helps when GH Pages hides console from you) -->
  <style>
    #cc-boot-error {
      display:none;
      position:fixed; left:12px; right:12px; bottom:12px;
      background:#fff; border:1px solid rgba(0,0,0,.15); border-radius:14px;
      padding:10px 12px; font-size:12px; color:#111; z-index:9999;
      box-shadow:0 10px 30px rgba(0,0,0,.06);
    }
    #cc-boot-error strong { color:#8B0000; }
    #cc-boot-error code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>

  <script>
    // ✅ Surface any JS errors (so you don’t get “Loading…” with no clue)
    window.addEventListener("error", (e) => {
      const box = document.getElementById("cc-boot-error");
      if (!box) return;
      box.style.display = "block";
      box.innerHTML =
        "<strong>JS Error:</strong> " +
        (e.message || "Unknown error") +
        (e.filename ? ("<br><code>" + e.filename + ":" + e.lineno + "</code>") : "");
    });
  </script>

</head>

<body class="bg-[#FFFCF9] text-neutral-900 font-body min-h-screen flex flex-col">

  <div class="flex-1 flex flex-col lg:flex-row">

    <!-- SIDEBAR -->
    <aside class="w-full lg:w-72 border-b lg:border-b-0 lg:border-r border-neutral-200 bg-white/80 backdrop-blur px-5 py-3 flex flex-col gap-3">

      <div class="flex flex-col">
        <a href="https://cordobarg.com/" target="_blank" rel="noopener noreferrer" class="inline-block hover:opacity-90 transition">
          <img
            src="assets/Cordoba Capital Logo (500 x 200 px) (3).png"
            alt="Cordoba Capital"
            class="block w-full max-w-[130px] h-auto"
          />
        </a>

        <div class="mt-3 text-[11px] uppercase tracking-[0.25em] text-neutral-500">
          Global Macro Engine
        </div>

        <div class="mt-2 inline-flex items-center gap-2 text-[11px] text-neutral-500">
          <span class="inline-flex items-center gap-1 rounded-full border border-neutral-200 bg-cordobaSoft px-2 py-0.5">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
            Beta version
          </span>
        </div>
      </div>

      <!-- NAV -->
      <nav class="text-sm text-neutral-700 space-y-1" id="cc-views-nav">
        <div class="text-[10px] uppercase tracking-[0.25em] text-neutral-500 mb-1">
          Views
        </div>

        <a href="#" data-view="snapshot"
           class="cc-view-link w-full flex items-center justify-between px-2.5 py-2 rounded-xl transition">
          <span class="flex items-center gap-2">
            <span class="h-1.5 w-1.5 rounded-full bg-cordobaGold"></span>
            Country snapshot
          </span>
          <span class="cc-live-pill text-[10px] uppercase text-neutral-500 hidden">Live</span>
        </a>

        <a href="#" data-view="growth"
           class="cc-view-link w-full flex items-center gap-2 px-2.5 py-2 rounded-xl transition">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
          Growth &amp; cycle
        </a>

        <a href="#" data-view="inflation"
           class="cc-view-link w-full flex items-center gap-2 px-2.5 py-2 rounded-xl transition">
          <span class="h-1.5 w-1.5 rounded-full bg-rose-400"></span>
          Inflation lens
        </a>

        <a href="#" data-view="liquidity"
           class="cc-view-link w-full flex items-center gap-2 px-2.5 py-2 rounded-xl transition">
          <span class="h-1.5 w-1.5 rounded-full bg-sky-400"></span>
          Liquidity &amp; money
        </a>

        <a href="#" data-view="external"
           class="cc-view-link w-full flex items-center gap-2 px-2.5 py-2 rounded-xl transition">
          <span class="h-1.5 w-1.5 rounded-full bg-amber-400"></span>
          External balance
        </a>
      </nav>

      <div class="mt-8 pt-4 border-t border-neutral-200">
        <p class="text-[11px] leading-relaxed text-neutral-500">
          This Global Macro Engine is a beta product and remains under active development.
          The data and outputs shown are for testing and exploratory purposes only and may be
          incomplete, delayed, or inaccurate. They should not be relied upon for investment
          or decision-making.
        </p>
      </div>

    </aside>

    <!-- MAIN -->
    <main class="flex-1 px-4 sm:px-6 lg:px-8 py-5 space-y-5" id="cc-export-root">

      <!-- HEADER -->
      <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <div class="space-y-1">
          <div class="text-xs uppercase tracking-[0.28em] text-neutral-500">
            Global Macro Dashboard
          </div>
          <div class="flex flex-wrap items-center gap-2 text-sm text-neutral-600">
            <span id="cc-country-current-label" class="font-semibold text-neutral-900">United States</span>
            <span class="text-neutral-400">·</span>
            <span id="cc-country-current-region" class="text-neutral-600">G-20 · DM</span>
            <span class="text-neutral-400">·</span>
            <span id="cc-data-as-of" class="text-neutral-500">latest: n/a</span>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <!-- Country dropdown -->
          <div class="relative">
            <button
              id="cc-country-toggle"
              type="button"
              class="inline-flex items-center gap-2 h-10 px-4 rounded-xl bg-white border border-neutral-200 shadow-subtle text-sm text-neutral-900 hover:bg-cordobaSoft transition"
            >
              <span class="h-2 w-2 rounded-full bg-emerald-500" id="cc-country-dot"></span>
              <span data-cc-country-label>United States</span>
              <span class="text-[11px] text-neutral-500" data-cc-country-region>G-20 · DM</span>
              <span class="text-[11px] text-neutral-500">▼</span>
            </button>

            <div
              id="cc-country-menu"
              class="hidden absolute z-20 mt-1 w-64 rounded-xl border border-neutral-200 bg-white shadow-subtle text-sm max-h-72 overflow-y-auto"
            >
              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">G-20 · Developed</div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="US" data-cc-region="G-20 · DM">United States</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="UK" data-cc-region="G-20 · DM">United Kingdom</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="DE" data-cc-region="G-20 · DM">Germany</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="FR" data-cc-region="G-20 · DM">France</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="JP" data-cc-region="G-20 · DM">Japan</button>

              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">G-20 · Emerging</div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="CN" data-cc-region="G-20 · EM">China</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="IN" data-cc-region="G-20 · EM">India</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="BR" data-cc-region="G-20 · EM">Brazil</button>

              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">Central Asia</div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="KZ" data-cc-region="Central Asia · EM">Kazakhstan</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="UZ" data-cc-region="Central Asia · EM">Uzbekistan</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="KG" data-cc-region="Central Asia · EM">Kyrgyzstan</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="TJ" data-cc-region="Central Asia · EM">Tajikistan</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="TM" data-cc-region="Central Asia · EM">Turkmenistan</button>

              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">South Asia</div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="PK" data-cc-region="South Asia · EM">Pakistan</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="BD" data-cc-region="South Asia · EM">Bangladesh</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="LK" data-cc-region="South Asia · EM">Sri Lanka</button>

              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">South-East Asia</div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="ID" data-cc-region="South-East Asia · EM">Indonesia</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="VN" data-cc-region="South-East Asia · EM">Vietnam</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="MY" data-cc-region="South-East Asia · EM">Malaysia</button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="SG" data-cc-region="South-East Asia · DM">Singapore</button>
            </div>
          </div>

          <div class="flex items-center gap-2">
            <a href="https://cordobarg.com/gme-feedback/" target="_blank" rel="noopener noreferrer"
               class="inline-flex items-center justify-center h-10 px-4 rounded-xl bg-cordobaGold text-white text-sm font-medium shadow-subtle hover:opacity-90 transition">
              Feature Request
            </a>

            <a href="https://cordobarg.com/login/" target="_blank" rel="noopener noreferrer"
               class="inline-flex items-center justify-center h-10 px-4 rounded-xl bg-white border border-neutral-200 text-sm font-medium text-neutral-700 shadow-subtle hover:bg-cordobaSoft hover:text-neutral-900 transition">
              Login
            </a>
          </div>
        </div>
      </header>

      <!-- VIEW PANELS -->
      <section data-cc-view-panel="snapshot" class="space-y-5">
        <!-- (your snapshot content unchanged) -->
        <!-- ... keep everything exactly as you already have it ... -->
      </section>

      <section data-cc-view-panel="growth" class="hidden space-y-4">
        <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-5 py-5">
          <div class="text-[11px] uppercase tracking-[0.28em] text-neutral-500">Growth &amp; cycle</div>
          <div class="mt-2 text-2xl font-semibold text-neutral-900">Growth &amp; cycle view</div>
          <div id="cc-growth-root" class="mt-4"></div>
        </section>
      </section>

      <section data-cc-view-panel="inflation" class="hidden space-y-4">
        <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-5 py-5">
          <div class="text-[11px] uppercase tracking-[0.28em] text-neutral-500">Inflation lens</div>
          <div class="mt-2 text-2xl font-semibold text-neutral-900">Inflation lens view</div>
          <div id="cc-inflation-root" class="mt-4"></div>
        </section>
      </section>

      <section data-cc-view-panel="liquidity" class="hidden space-y-4">
        <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-5 py-5">
          <div class="text-[11px] uppercase tracking-[0.28em] text-neutral-500">Liquidity &amp; money</div>
          <div class="mt-2 text-2xl font-semibold text-neutral-900">Liquidity &amp; money view</div>
          <div id="cc-liquidity-root" class="mt-4"></div>
        </section>
      </section>

      <section data-cc-view-panel="external" class="hidden space-y-4">
        <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-5 py-5">
          <div class="text-[11px] uppercase tracking-[0.28em] text-neutral-500">External balance</div>
          <div class="mt-2 text-2xl font-semibold text-neutral-900">External balance view</div>
          <div id="cc-external-root" class="mt-4"></div>
        </section>
      </section>

      <!-- ALWAYS VISIBLE section remains unchanged -->
      <!-- ... -->

    </main>
  </div>

  <footer class="border-t border-neutral-200 bg-white/95 backdrop-blur text-xs text-neutral-500">
    <!-- unchanged -->
  </footer>

  <div id="cc-methodology-modal" class="fixed inset-0 z-40 hidden">
    <!-- unchanged -->
  </div>

  <div id="cc-boot-error"></div>

  <!-- ✅ Libraries FIRST (because main.js calls them for export buttons) -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- ✅ Your engine modules (order matters: quant module before main) -->
  <script defer src="/assets/js/cc_growth_cycle_quant.js"></script>
  <script defer src="/assets/js/main.js"></script>

  <!-- ✅ Boot check: confirms main.js actually loaded -->
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      // If main.js loads, you can optionally set something like window.__CC_MAIN_LOADED__ = true;
      // (see tiny patch below)
      setTimeout(() => {
        if (!window.__CC_MAIN_LOADED__) {
          const box = document.getElementById("cc-boot-error");
          if (!box) return;
          box.style.display = "block";
          box.innerHTML =
            "<strong>Boot error:</strong> <code>/assets/js/main.js</code> did not run. " +
            "Check the file path + open DevTools → Console + Network (404).";
        }
      }, 800);
    });
  </script>

</body>
</html>
