<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cordoba Capital – GME</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="assets/style.css" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cordobaGold: '#9A690F',
            cordobaSoft: '#FFF7F0'
          },
          fontFamily: {
            heading: ['"Times New Roman"', 'serif'],
            body: ['Helvetica', 'system-ui', 'sans-serif']
          },
          boxShadow: {
            subtle: '0 10px 30px rgba(0,0,0,0.04)'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-[#FFFCF9] text-neutral-900 font-body min-h-screen flex flex-col">

  <!-- Page wrapper -->
  <div class="flex-1 flex flex-col lg:flex-row">

    <!-- Sidebar -->
    <aside class="w-full lg:w-72 border-b lg:border-b-0 lg:border-r border-neutral-200 bg-white/80 backdrop-blur px-5 py-4 flex flex-col gap-4">
      <div>
        <div class="font-heading text-2xl tracking-wide leading-tight">
          Cordoba Capital
        </div>
        <div class="text-[11px] uppercase tracking-[0.25em] text-neutral-500 mt-1">
          Global Macro Engine
        </div>
        <div class="mt-2 inline-flex items-center gap-2 text-[11px] text-neutral-500">
          <span class="inline-flex items-center gap-1 rounded-full border border-neutral-200 bg-cordobaSoft px-2 py-0.5">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span>
            Beta version
          </span>
          <span>World Bank WDI</span>
        </div>
      </div>

      <!-- Navigation (static for now) -->
      <nav class="text-sm text-neutral-700 space-y-1">
        <div class="text-[10px] uppercase tracking-[0.25em] text-neutral-500 mb-1">
          Views
        </div>
        <button class="w-full flex items-center justify-between px-2.5 py-2 rounded-xl bg-cordobaSoft text-neutral-900">
          <span class="flex items-center gap-2">
            <span class="h-1.5 w-1.5 rounded-full bg-cordobaGold"></span>
            Country snapshot
          </span>
          <span class="text-[10px] uppercase text-neutral-500">Live</span>
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
          Growth &amp; cycle
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-rose-400"></span>
          Inflation lens
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-sky-400"></span>
          Liquidity &amp; money
        </button>
        <button class="w-full flex items-center gap-2 px-2.5 py-2 rounded-xl hover:bg-neutral-100">
          <span class="h-1.5 w-1.5 rounded-full bg-amber-400"></span>
          External balance
        </button>
      </nav>
    </aside>

    <!-- Main content -->
    <main class="flex-1 px-4 sm:px-6 lg:px-8 py-5 space-y-5">

      <!-- Top bar -->
      <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <div class="space-y-1">
          <div class="text-xs uppercase tracking-[0.28em] text-neutral-500">
            Global Macro Dashboard
          </div>
          <div class="flex flex-wrap items-center gap-2 text-sm text-neutral-600">
            <span id="cc-country-current-label" class="font-semibold text-neutral-900">
              United States
            </span>
            <span class="text-neutral-400">·</span>
            <span id="cc-country-current-region" class="text-neutral-600">
              G-20 · DM
            </span>
            <span class="text-neutral-400">·</span>
            <span id="cc-data-as-of" class="text-neutral-500">
              latest: n/a
            </span>
          </div>
        </div>

        <div class="flex flex-wrap items-center gap-3">
          <!-- Country dropdown -->
          <div class="relative">
            <button
              id="cc-country-toggle"
              type="button"
              class="inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-3 py-1.5 text-sm text-neutral-800 shadow-subtle hover:border-cordobaGold"
            >
              <span class="h-2 w-2 rounded-full bg-emerald-500" id="cc-country-dot"></span>
              <span data-cc-country-label>United States</span>
              <span class="text-[11px] text-neutral-500" data-cc-country-region>G-20 · DM</span>
              <span class="text-[11px] text-neutral-500">▼</span>
            </button>

            <div
              id="cc-country-menu"
              class="hidden absolute z-20 mt-1 w-64 rounded-xl border border-neutral-200 bg-white shadow-subtle text-sm max-h-72 overflow-y-auto"
            >
              <div class="px-3 py-2 text-[10px] uppercase tracking-[0.22em] text-neutral-500">
                G-20 Countries
              </div>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="US" data-cc-region="G-20 · DM">
                United States
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="UK" data-cc-region="G-20 · DM">
                United Kingdom
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="DE" data-cc-region="G-20 · DM">
                Germany
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="FR" data-cc-region="G-20 · DM">
                France
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="JP" data-cc-region="G-20 · DM">
                Japan
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="CN" data-cc-region="G-20 · EM">
                China
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="IN" data-cc-region="G-20 · EM">
                India
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="BR" data-cc-region="G-20 · EM">
                Brazil
              </button>
              <button class="w-full text-left px-3 py-1.5 hover:bg-cordobaSoft" data-cc-country="UZ" data-cc-region="Central Asia · EM">
                Uzbekistan
              </button>
            </div>
          </div>
          
          <!-- Support / Login buttons -->
          <div class="flex items-center gap-1 text-xs bg-white border border-neutral-200 rounded-full p-0.5 shadow-subtle">
            <!-- Support button -->
            <a
              href="mailto:help@cordobacapital.co.uk"
              class="px-3 py-1 rounded-full bg-cordobaGold text-white font-medium hover:opacity-90 transition"
            >
              Support
            </a>
            <!-- Login button -->
            <a
              href="https://cordobacapital.co.uk/login/"
              class="px-3 py-1 rounded-full text-neutral-500 hover:bg-cordobaSoft hover:text-neutral-900 transition"
            >
              Login
            </a>
          </div>

        </div>
      </header>

      <!-- Regime summary row -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <!-- Narrative -->
        <div class="lg:col-span-2 rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Macro Regime – Narrative
              </div>
              <div id="cc-regime-title" class="mt-1 text-sm font-semibold text-neutral-900">
                Loading regime...
              </div>
            </div>
            <div class="text-right">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Data coverage
              </div>
              <div class="text-sm text-neutral-900">
                Confidence: <span id="cc-regime-confidence">–</span>
              </div>
            </div>
          </div>
          <p id="cc-regime-body" class="text-sm text-neutral-700 leading-relaxed">
            Pulling in latest macro data...
          </p>
          <div class="flex flex-wrap items-center gap-2 text-xs text-neutral-500">
            <span class="uppercase tracking-[0.18em] text-[10px]">Closest analogue periods:</span>
            <span id="cc-analogue-years" class="flex flex-wrap gap-1"></span>
          </div>
          <div class="flex flex-wrap items-center gap-2 text-xs text-neutral-500">
            <span class="uppercase tracking-[0.18em] text-[10px]">Risk flags:</span>
            <span id="cc-risk-flags" class="flex flex-wrap gap-1"></span>
          </div>
        </div>

        <!-- Engine scorecards -->
        <div class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-3 flex flex-col gap-3">
          <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
            Composite Engines
          </div>
          <div id="cc-engine-cards" class="grid grid-cols-2 gap-2 text-xs">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- Headline indicators + inflection list -->
      <section class="grid grid-cols-1 xl:grid-cols-3 gap-4">
        <!-- Headline tiles -->
        <div class="xl:col-span-2 rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4">
          <div class="flex items-center justify-between mb-3">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Headline Macro Indicators
              </div>
              <div class="text-sm text-neutral-700">
                Latest readings (mixed frequency, normalised)
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm">
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                GDP growth
              </div>
              <div id="cc-gdp-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-gdp-extra">
                Real GDP growth (annualised where applicable).
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Inflation (CPI)
              </div>
              <div id="cc-inflation-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-inflation-extra">
                Headline CPI (annual % change).
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Unemployment
              </div>
              <div id="cc-unemployment-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-unemployment-extra">
                % of labour force.
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Broad money growth
              </div>
              <div id="cc-money-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-money-extra">
                M2 (or nearest equivalent) growth.
              </div>
            </div>
            <div class="p-3 rounded-xl border border-neutral-200 bg-cordobaSoft">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500">
                Current account / GDP
              </div>
              <div id="cc-ca-latest" class="mt-1 text-lg font-semibold text-neutral-900">
                –
              </div>
              <div class="text-xs text-neutral-600 mt-1" id="cc-ca-extra">
                External balance (% of GDP).
              </div>
            </div>
          </div>
        </div>

        <!-- Inflection list -->
        <div class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4 flex flex-col gap-3">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Key Inflection Signals
              </div>
              <div class="text-sm text-neutral-700">
                z-scores vs recent history
              </div>
            </div>
          </div>
          <div id="cc-inflection-list" class="space-y-2 text-xs">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- Indicator table -->
      <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2 mb-3">
          <div>
            <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
              Indicator Grid
            </div>
            <div class="text-sm text-neutral-700">
              Key indicators – <span id="cc-signals-country">United States</span>
            </div>
          </div>
          <div class="flex items-center gap-2 text-[11px]">
            <button
              id="cc-filter-all"
              class="px-2.5 py-1 rounded-full border border-neutral-200 bg-cordobaSoft"
              type="button"
            >
              All indicators
            </button>
            <button
              id="cc-filter-top"
              class="px-2.5 py-1 rounded-full border border-neutral-200 bg-white"
              type="button"
            >
              Largest moves
            </button>
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full text-xs">
            <thead>
              <tr class="text-[11px] uppercase tracking-[0.16em] text-neutral-500 border-b border-neutral-200">
                <th class="py-2 text-left">Indicator</th>
                <th class="py-2 text-left">Signal</th>
                <th class="py-2 text-left">Trend (10yr)</th>
                <th class="py-2 text-left"></th> <!-- sparkline -->
                <th class="py-2 text-right">Last</th>
                <th class="py-2 text-right">ZS</th>
                <th class="py-2 text-left">Note</th>
              </tr>
            </thead>
            <tbody id="cc-indicator-rows" class="divide-y divide-neutral-100">
              <!-- Filled by JS -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Analyst note helper + Cordoba research row -->
      <section class="rounded-2xl border border-neutral-200 bg-white shadow-subtle px-4 py-4">
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-4">
          
          <!-- Note helper -->
          <div class="xl:col-span-2 flex flex-col gap-3">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                  Analyst Note Helper
                </div>
                <div class="text-sm text-neutral-700">
                  Draft macro commentary for the selected country
                </div>
              </div>
              <div class="text-[11px] text-neutral-500">
                Auto-generated from current engine configuration
              </div>
            </div>

            <textarea
              id="cc-note-draft"
              class="mt-2 w-full h-48 rounded-xl border border-neutral-200 bg-[#FFFCF9] px-3 py-2 text-xs leading-relaxed text-neutral-800 focus:outline-none focus:ring-1 focus:ring-cordobaGold focus:border-cordobaGold"
              placeholder="A short macro note will appear here once the data has loaded. You can edit freely before sending."
            ></textarea>

            <div class="mt-2">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500 mb-1">
                Pointers to structure your note
              </div>
              <ul id="cc-note-bullets" class="list-disc list-inside space-y-1 text-xs text-neutral-700">
                <!-- Filled by JS -->
              </ul>
            </div>

            <!-- Next 3 questions box -->
            <div class="mt-4 rounded-xl border border-neutral-200 bg-[#FFFCF9] px-3 py-3">
              <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500 mb-1">
                Next 3 questions to ask
              </div>
              <ul id="cc-question-list" class="list-disc list-inside space-y-1 text-xs text-neutral-700">
                <!-- Filled by JS -->
              </ul>
            </div>
          </div>

          <!-- Cordoba research suggestions -->
          <div class="flex flex-col gap-3">
            <div>
              <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
                Cordoba Research Matches
              </div>
              <div class="text-sm text-neutral-700">
                Notes most relevant to this regime
              </div>
              <div class="text-[11px] text-neutral-600 mt-1">
                Suggested directly from the main Cordoba Capital site based on current engine scores.
              </div>
            </div>
            <div id="cc-research-list" class="mt-2 space-y-2 text-xs">
              <!-- Filled by JS -->
            </div>
            <div class="mt-2 text-[11px] text-neutral-500">
              Full library:&nbsp;
              <a
                href="https://cordobacapital.co.uk/insights/"
                target="_blank"
                rel="noopener noreferrer"
                class="underline decoration-cordobaGold decoration-1 underline-offset-2"
              >
                cordobacapital.co.uk/insights
              </a>
            </div>
          </div>

        </div>
      </section>
    </main>
  </div>

  <!-- Institutional footer -->
  <footer class="border-t border-neutral-200 bg-white/95 backdrop-blur text-xs text-neutral-500">
    <div class="w-full px-4 sm:px-6 lg:px-8 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-left">
      <div class="flex flex-wrap items-center gap-2 text-left">
        <span>
          Global Macro Engine
        </span>
        <span class="text-neutral-400">·</span>
        <span>v0.3.0 (Beta)</span>
        <span class="text-neutral-400">·</span>
      </div>

      <!-- Right links -->
      <div class="flex flex-wrap items-center gap-4 text-left sm:text-right">
        <a
          href="https://cordobacapital.co.uk"
          target="_blank"
          rel="noopener noreferrer"
          class="hover:text-neutral-900"
        >
          Cordoba Capital Website
        </a>

        <button
          id="cc-methodology-open"
          type="button"
          class="underline decoration-neutral-300 underline-offset-2 hover:text-neutral-900"
        >
          Methodology &amp; data notes
        </button>
      </div>
    </div>
  </footer>

  <!-- Methodology & data notes modal -->
  <div
    id="cc-methodology-modal"
    class="fixed inset-0 z-40 hidden"
  >
    <div
      data-cc-methodology-overlay
      class="absolute inset-0 bg-black/30"
    ></div>
    <div class="relative z-10 flex min-h-full items-end sm:items-center justify-center p-4">
      <div class="w-full max-w-lg rounded-2xl bg-white shadow-subtle border border-neutral-200 px-5 py-4">
        <div class="flex items-center justify-between mb-2">
          <div>
            <div class="text-[11px] uppercase tracking-[0.2em] text-neutral-500">
              Methodology &amp; Data Notes
            </div>
            <div class="text-sm text-neutral-800">
              How the engine builds scores and narratives
            </div>
          </div>
          <button
            id="cc-methodology-close"
            type="button"
            class="text-xs text-neutral-500 hover:text-neutral-800"
          >
            Close
          </button>
        </div>
        <div class="text-xs text-neutral-700 space-y-2 max-h-80 overflow-y-auto pr-1">
          <p>
            1. <span class="font-semibold">Data frequency.</span> The engine can ingest annual, quarterly, or monthly data. At present, most series are sourced from the World Bank WDI on an annual basis, with scope to plug in fresher national or FRED/OECD feeds over time.
          </p>
          <p>
            2. <span class="font-semibold">History window.</span> For each indicator we work with a rolling history window (up to the last 40 observations). This keeps signals anchored in recent regimes rather than very old cycles.
          </p>
          <p>
            3. <span class="font-semibold">Standardisation.</span> We compute z-scores for the latest observation using (latest − mean) / standard deviation over the history window. This lets us talk about how unusual a level is in standard-deviation terms.
          </p>
          <p>
            4. <span class="font-semibold">Signals.</span> Qualitative labels such as “Strengthening above trend” or “Elevated but cooling” combine the z-score with the direction of change versus the prior observation.
          </p>
          <p>
            5. <span class="font-semibold">Composite engines.</span> The Growth, Inflation, Liquidity, and External engines are simple weighted combinations of indicator z-scores, rescaled to a 10–90 range for ease of interpretation.
          </p>
          <p>
            6. <span class="font-semibold">Analogues.</span> “Closest analogue periods” highlight historical points where the z-score profile is closest to today, as a quick pointer to prior regimes that looked similar.
          </p>
          <p>
            7. <span class="font-semibold">Caveats.</span> All data is subject to revision and publication lag. Some series may be missing or interpolated for certain countries. The dashboard is designed as a qualitative screening tool, not a replacement for detailed country and asset-level work.
          </p>
          <p class="text-[11px] text-neutral-500">
            This tool is for internal and educational use only and does not constitute investment advice or a recommendation to buy or sell any security or asset.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="main.js"></script>
  <!-- Export libraries -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
